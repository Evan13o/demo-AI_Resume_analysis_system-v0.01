<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¤– AIç®€å†åˆ†æç³»ç»Ÿ</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .app {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            min-height: 90vh;
        }
        
        .sidebar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            width: 250px;
            position: fixed;
            height: 100%;
        }
        
        .main-content {
            margin-left: 250px;
            padding: 40px;
        }
        
        .header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 40px;
        }
        
        .header h1 {
            color: #333;
            font-size: 28px;
        }
        
        .upload-area {
            border: 3px dashed #667eea;
            border-radius: 15px;
            padding: 60px 20px;
            text-align: center;
            margin: 20px 0;
            background: #f8f9fa;
            transition: all 0.3s;
        }
        
        .upload-area:hover {
            background: #eef2ff;
            border-color: #764ba2;
        }
        
        .button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .result-box {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-top: 30px;
            border-left: 5px solid #667eea;
        }
        
        .nav-button {
            display: block;
            background: rgba(255,255,255,0.1);
            border: none;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            cursor: pointer;
            text-align: left;
            font-size: 16px;
            transition: all 0.3s;
            width: 100%;
        }
        
        .nav-button:hover {
            background: rgba(255,255,255,0.2);
            transform: translateX(5px);
        }
        
        .nav-button.active {
            background: rgba(255,255,255,0.3);
            font-weight: bold;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        textarea {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            margin: 20px 0;
            font-family: inherit;
        }
        
        @media (max-width: 768px) {
            .sidebar {
                position: static;
                width: 100%;
                height: auto;
            }
            
            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // ä¿®æ”¹ä¸ºä½ çš„åç«¯ API åœ°å€
        const BACKEND_URL = "https://your-backend-api.com";
        
        function App() {
            const [activeTab, setActiveTab] = useState('upload');
            const [resumeInfo, setResumeInfo] = useState(null);
            const [file, setFile] = useState(null);
            const [jobDescription, setJobDescription] = useState('');
            const [analysisResult, setAnalysisResult] = useState(null);
            const [matchResult, setMatchResult] = useState(null);
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState('');
            
            const handleFileUpload = async () => {
                if (!file) {
                    alert('è¯·é€‰æ‹©æ–‡ä»¶');
                    return;
                }
                
                setLoading(true);
                setError('');
                
                const formData = new FormData();
                formData.append('file', file);
                
                try {
                    const response = await axios.post(`${BACKEND_URL}/upload/resume`, formData, {
                        headers: {
                            'Content-Type': 'multipart/form-data'
                        }
                    });
                    
                    setResumeInfo(response.data.resume_info);
                    alert('ç®€å†ä¸Šä¼ æˆåŠŸï¼');
                } catch (err) {
                    setError('ä¸Šä¼ å¤±è´¥: ' + (err.response?.data?.detail || err.message));
                } finally {
                    setLoading(false);
                }
            };
            
            const handleAnalyze = async () => {
                if (!resumeInfo) {
                    alert('è¯·å…ˆä¸Šä¼ ç®€å†');
                    return;
                }
                
                setLoading(true);
                setError('');
                
                try {
                    const response = await axios.post(`${BACKEND_URL}/analyze/resume`, resumeInfo);
                    setAnalysisResult(response.data);
                    alert('åˆ†æå®Œæˆï¼');
                } catch (err) {
                    setError('åˆ†æå¤±è´¥: ' + (err.response?.data?.detail || err.message));
                } finally {
                    setLoading(false);
                }
            };
            
            const handleMatch = async () => {
                if (!resumeInfo) {
                    alert('è¯·å…ˆä¸Šä¼ ç®€å†');
                    return;
                }
                
                if (!jobDescription.trim()) {
                    alert('è¯·è¾“å…¥èŒä½æè¿°');
                    return;
                }
                
                setLoading(true);
                setError('');
                
                try {
                    const response = await axios.post(`${BACKEND_URL}/match/resume`, {
                        resume_info: resumeInfo,
                        job_description: {
                            description: jobDescription
                        }
                    });
                    
                    setMatchResult(response.data.match_result);
                    alert('åŒ¹é…å®Œæˆï¼');
                } catch (err) {
                    setError('åŒ¹é…å¤±è´¥: ' + (err.response?.data?.detail || err.message));
                } finally {
                    setLoading(false);
                }
            };
            
            return (
                <div className="container">
                    <div className="app">
                        <div className="sidebar">
                            <h2>ğŸ¤– AIç®€å†åˆ†æ</h2>
                            <button 
                                className={`nav-button ${activeTab === 'upload' ? 'active' : ''}`}
                                onClick={() => setActiveTab('upload')}
                            >
                                ğŸ“¤ ç®€å†ä¸Šä¼ 
                            </button>
                            <button 
                                className={`nav-button ${activeTab === 'analyze' ? 'active' : ''}`}
                                onClick={() => setActiveTab('analyze')}
                            >
                                ğŸ” ç®€å†åˆ†æ
                            </button>
                            <button 
                                className={`nav-button ${activeTab === 'match' ? 'active' : ''}`}
                                onClick={() => setActiveTab('match')}
                            >
                                ğŸ¤ èŒä½åŒ¹é…
                            </button>
                        </div>
                        
                        <div className="main-content">
                            <div className="header">
                                <h1>AIç®€å†åˆ†æç³»ç»Ÿ</h1>
                            </div>
                            
                            {error && (
                                <div style={{color: 'red', padding: '10px', background: '#ffe6e6', borderRadius: '5px', marginBottom: '20px'}}>
                                    {error}
                                </div>
                            )}
                            
                            {loading ? (
                                <div className="loading">
                                    <div className="spinner"></div>
                                    <p>å¤„ç†ä¸­ï¼Œè¯·ç¨å€™...</p>
                                </div>
                            ) : (
                                <>
                                    {activeTab === 'upload' && (
                                        <div>
                                            <h2>ç®€å†ä¸Šä¼ </h2>
                                            <div className="upload-area">
                                                <input 
                                                    type="file" 
                                                    accept=".pdf" 
                                                    onChange={(e) => setFile(e.target.files[0])}
                                                    style={{marginBottom: '20px'}}
                                                />
                                                <button className="button" onClick={handleFileUpload}>
                                                    ä¸Šä¼ ç®€å†
                                                </button>
                                            </div>
                                        </div>
                                    )}
                                    
                                    {activeTab === 'analyze' && (
                                        <div>
                                            <h2>ç®€å†åˆ†æ</h2>
                                            {resumeInfo ? (
                                                <>
                                                    <button className="button" onClick={handleAnalyze}>
                                                        å¼€å§‹åˆ†æ
                                                    </button>
                                                    {analysisResult && (
                                                        <div className="result-box">
                                                            <h3>åˆ†æç»“æœ</h3>
                                                            <pre>{JSON.stringify(analysisResult, null, 2)}</pre>
                                                        </div>
                                                    )}
                                                </>
                                            ) : (
                                                <p>è¯·å…ˆä¸Šä¼ ç®€å†</p>
                                            )}
                                        </div>
                                    )}
                                    
                                    {activeTab === 'match' && (
                                        <div>
                                            <h2>èŒä½åŒ¹é…</h2>
                                            {resumeInfo ? (
                                                <>
                                                    <textarea 
                                                        placeholder="è¯·è¾“å…¥èŒä½æè¿°..."
                                                        value={jobDescription}
                                                        onChange={(e) => setJobDescription(e.target.value)}
                                                    />
                                                    <button className="button" onClick={handleMatch}>
                                                        å¼€å§‹åŒ¹é…
                                                    </button>
                                                    {matchResult && (
                                                        <div className="result-box">
                                                            <h3>åŒ¹é…ç»“æœ</h3>
                                                            <pre>{JSON.stringify(matchResult, null, 2)}</pre>
                                                        </div>
                                                    )}
                                                </>
                                            ) : (
                                                <p>è¯·å…ˆä¸Šä¼ ç®€å†</p>
                                            )}
                                        </div>
                                    )}
                                </>
                            )}
                        </div>
                    </div>
                </div>
            );
        }
        
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
